<!DOCTYPE html>

<html lang="en">
<head>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">


    <title>AngstHasenFlights</title>

</head>
<body>


</body>


<header>
    {% if user.is_authenticated %}
    <header style="background-color:black; position:sticky; top: 0px; letter-spacing: 2px; font-family: Arial; font-weight:normal; font-size:14px">
        You are logged in as {{current_user|safe}}.
    </header>
    {% endif %}
    <h1>
        AngStHasenFlights
    </h1>
    <header class="site-header">
        {% if user.is_authenticated %}
        <nav class="navbar navbar-expand-md navbar-dark bg-steel fixed-top" style="top:17px">
            {% else %}
        <nav class="navbar navbar-expand-md navbar-dark bg-steel fixed-top" style="top:00px">
            {% endif %}
            <div class="container">
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggle"
                        aria-controls="navbarToggle" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarToggle">
                    <div class="navbar-nav mr-auto">
                        <a class="nav-item nav-link" href="{% url 'flightseats-home' %}">Home</a>
                        <a class="nav-item nav-link" href="{% url 'help' %}">Help</a>
                    </div>
                    <!-- Navbar Right Side -->
                    <div class="navbar-nav">
                        {% if user.is_authenticated %}
                        <a class="nav-item nav-link" href="{% url 'flights' %}">Book seat</a>
                        <a class="nav-item nav-link" href="{% url 'logout' %}">Logout</a>
                        {% else %}
                        <a class="nav-item nav-link" href="{% url 'login' %}">Login</a>
                        <a class="nav-item nav-link" href="{% url 'register' %}">Register</a>

                        {% endif %}

                    </div>
                </div>
            </div>
        </nav>
    </header>
</header>

<style>
    header {
    font-family: 'Open Sans';
    font-weight: bold;
    background-color: rgba(69,123,181);
    letter-spacing:5px;
    color: white;
    margin: 0;
    position: sticky;
    top: 0;
    width: 100%;

    }

    .nav-item{
    font-family: Arial, sans-serif;
    font-size: medium;
    font-weight: bold;
    letter-spacing: 1px;
    }


    button {
    height: 60px;
    width: 60px;
    border-radius: 50%;
    font-size: 16px;
    font-weight: bold;
    background-color: rgba(69,123,181, 0.2);
    color: black;
    cursor:pointer;
    }


    .button2 {
    height: 30px;
    width: 90px;
    border-radius: 20%;
    font-weight: semi bold;
    font-size: 12px;
    background-color: rgba(69,123,181, 0.05);
    color: black;
    cursor:pointer;
    border-width: thin;
    }

    .button_acc {
    margin: 155px;
    height: 30px;
    width: 90px;
    border-radius: 50%;
    font-weight: semi bold;
    font-size: 12px;
    background-color: rgba(69,123,181, 0.0);
    color: black;
    cursor:pointer;
    border-width: thin;
    }

    form {
    font-size: 16px;
    font-weight: bold;
    text-align: center;
    }

    ol li{
    font-size: 24px;
    text-align: left;
    }

    a {
    font-size: 16px
    }

    .tab {
    display: inline-block;
    min-width: 30px
    }

    p {text-align: center;}
    .help {
    margin: 20px;
    text-align: justify;
    }
    h1 {text-align: center;}

    table.table_on_the_left, table.table_on_the_right {
      display:inline-block;
    }

    body {
      text-align:center;
      background-color: rgba(0,0,0, 0.1);
    }
    ::placeholder {
       text-align: center;
    }

    .swal2-styled.swal2-confirm{
      padding: 0px 0px;
      border-radius: 6px;
      width:100px;
      font-size: 16px;
      background-color: #4962B3;
    }


    .color-red {
      color: red;
    }

    .color-black {
      color: black;
    }

.accordion {
  border-radius: 12.5px;
  user-select: none;
  background-color: #eee;
  display: block;
  color: #444;
  margin: 10px;
  cursor: pointer;
  padding: 18px;
  width: 100%;
  border: 1px;
  text-align: center;
  outline: none;
  font-size: 15px;
  transition: 0.8s;
  align: center;
  text-decoration: none;
}

.active, .accordion:hover {
  background-color: #ccc;
}

.panel {
  border-radius: 25px;
  margin: 10px;
  align: center;
  text-align: center;
  width: 100%;
  border-radius: 25px;
  display: none;
  background-color: white;
  overflow: hidden;
}




















</style>

<body>

<div class="container">
    {% if messages %}
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }}">
        {{ message }}
    </div>
    {% endfor %}
    {% endif %}
    {% block content %}{% endblock %}
</div>
<img src="/../static/img/images/angsthase4.png" alt="angsthase4" width="333" height="110" style="position: relative; bottom: 0;">

<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>


    $("#subm").click(function() {

        var rowl = "{{rowlist|safe}}";
        var bookedl = "{{bookedseats|safe}}";
        var row = $("#seat_choice_row").val();
        var seat = $("#seatlet").val();
        var rowseat = row + seat;
        var auth_ind = "{{auth_ind|safe}}";

        event.preventDefault();

        if(auth_ind == "True"){
            if(rowseat == ""){
                Swal.fire({
                    title: "Booking failed!",
                    text: "You did not enter anything.",
                    icon: "error",
                    confirmButtonText: "Try again.",
                    allowOutsideClick: false
                })
		    }else{
                if(bookedl.includes(rowseat)){
                    Swal.fire({
                        title: "Booking failed!",
                        text: "Seat is already booked.",
                        icon: "error",
                        confirmButtonText: "Try again.",
                        allowOutsideClick: false
                    });
                }else{
                    if(!(rowl.includes(row)) || !(["A", "B", "C", "D", "E", "F"].includes(seat))){
                        if(!(rowl.includes(row)) && (["A", "B", "C", "D", "E", "F"].includes(seat))){
                            Swal.fire({
                                  title: "Booking failed!",
                                  text: "Please check row again.",
                                  icon: "error",
                                  confirmButtonText: "Try again.",
                                  allowOutsideClick: false
                            });
                        }else{
                            if((rowl.includes(row)) && !(["A", "B", "C", "D", "E", "F"].includes(seat))){
                            Swal.fire({
                              title: "Booking failed!",
                              text: "Please check seat letter again.",
                              icon: "error",
                              confirmButtonText: "Try again.",
                              allowOutsideClick: false
                            });
                            }else{
                                Swal.fire({
                                      title: "Booking failed!",
                                      text: "Please check both fields again.",
                                      icon: "error",
                                      confirmButtonText: "Try again.",
                                      allowOutsideClick: false
                                })
                            }
                        }
                        }else{
                        Swal.fire({
                                  title: "Booking successful!",
                                  text: "Your seat " + row +  seat + " is now reserved.",
                                  icon: "success",
                                  allowOutsideClick: false,
                                  showConfirmButton:false
                            });
                            setTimeout(function () {
                                     $('#submissionform').submit();
                                      }, 2000);
                        };
                    }
                }
        } else {
            Swal.fire({
                title: "Booking failed!",
                text: "Please login first.",
                icon: "error",
                confirmButtonText: "Login now.",
                allowOutsideClick: false
            }).then(function() {
    window.location = "/login/";
});
        }
    });





























































</script>
</body>

</html>
